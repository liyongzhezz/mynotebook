
## 静态算法

静态算法表示仅根据算法本身进行调度，而不关注后端RS的压力情况，常见静态算法有如下。

<br>



### RR轮询

RR（RoundRobin），表示将请求依次调度到后端的RS上。



### WRR加权轮询

WRR（Weighted RR），根据设定的不通RS的权重，将请求尽量多的调度到权重大的RS上。



### SH源地址hash

SH（Source Hashing），对源地址进行hash，将来自同一个IP地址的请求始终调度到一个RS上，实现了session绑定。



### DH目标地址hash

对目标地址进行hash，将发往同一目标地址的请求始终调度到同一个RS上，常用在使用正向代理缓存的负载均衡场景中。

<br>



## 动态算法

动态算法要考虑后端RS的实际负载情况，然后根据算法进行调度，常见动态调度算法如下。

<br>



### LC最小连接

LC适合于使用长连接的应用，请求将会被调度到连接数较少的RS上。其负载计算公式如下：
$$
负载 = 活动连接数 * 256 + 非活动连接数
$$




### WLC加权最小连接

根据服务器的连接数和权重进行请求的调度，是默认的调度算法。其负载计算公式如下：
$$
负载 = （活动连接数 * 256 + 非活动连接数）/ 权重
$$




### SED初始连接权重高优先连接

第一次连接的时候调度到服务器权重高的RS。其负载计算公式如下：
$$
负载 = （活动连接数 * 256 + 1）/ 权重
$$




### NQ

NQ（No Queue）在第一轮均匀分配，后续使用SED算法调度请求。



### LBLC基于局部性的最少链接

LBLC调度算法先根据请求的目标IP地址找出该目标IP地址最近使用的服务器，若该服务器是可用的且没有超载，将请求发送到该服务器；若服务器不存在，或者该服务器超载且有服务器处于其一半的工作负载，则用最少链接的原则选出一个可用的服务器，将请求发送到该服务器。



### LBLCR带复制的基于局部性最少链接

LBLCR算法先根据请求的目标IP地址找出该目标IP地址对应的服务器组；按最小连接原则从该服务器组中选出一台服务器，若服务器没有超载，将请求发送到该服务器；若服务器超载，则按最小连接原则从整个集群中选出一台服务器，将该服务器加入到服务器组中，将请求发送到该服务器。同时，当该服务器组有一段时间没有被修改，将最忙的服务器从服务器组中删除，以降低复制的程度。