## RDB方式

RDB方式是利用子进程在指定的时间间隔内，将内存中的数据集生成快照写入磁盘中；默认支持，不需要进行配置

<br>



## 优势和缺陷

优势：

- redis数据库将只包含一个文件（利于备份）；
- 利于灾难恢复；
- 性能最大化，启动效率最高（原理是fork一个子进程进行数据备份）；

缺陷：

- 无法完全保证数据高可用；
- 数据量大的时候可能在数据持久化的时候导致服务不可用；



如果redis使用的内存很大，例如32G等，如果使用RDB方式则建议磁盘选择ssd，否则会由于备份数据文件过大导致磁盘IO不足。

<br>

## 配置RDB持久化
在redis.conf配置文件中，有如下的一些关于RDB持久化的配置：

```bash
// 每900秒至少1个key发生变化就持久化一次
save 900 1

// 每300秒至少10个key发生变化就持久化一次
save 300 10

// 每60秒至少10000个key发生变化就持久化一次
save 60 10000

// 持久化数据文件名
dbfilename dump.rdb

// 数据文件路径
dir ./

// 不做持久化则注释上边的选项并打开下边选项的注释
save ""
```

